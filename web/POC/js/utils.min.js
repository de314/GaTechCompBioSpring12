jQuery.extend({createUploadIframe:function(id,uri){var frameId="jUploadFrame"+id;var iframeHtml='<iframe id="'+frameId+'" name="'+frameId+'" style="position:absolute; top:-9999px; left:-9999px"';if(window.ActiveXObject)if(typeof uri=="boolean")iframeHtml+=' src="'+"javascript:false"+'"';else if(typeof uri=="string")iframeHtml+=' src="'+uri+'"';iframeHtml+=" />";jQuery(iframeHtml).appendTo(document.body);return jQuery("#"+frameId).get(0)},createUploadForm:function(id,fileElementId,data){var formId=
"jUploadForm"+id;var fileId="jUploadFile"+id;var form=jQuery('<form  action="" method="POST" name="'+formId+'" id="'+formId+'" enctype="multipart/form-data"></form>');if(data)for(var i in data)jQuery('<input type="hidden" name="'+i+'" value="'+data[i]+'" />').appendTo(form);var oldElement=jQuery("#"+fileElementId);var newElement=jQuery(oldElement).clone();jQuery(oldElement).attr("id",fileId);jQuery(oldElement).before(newElement);jQuery(oldElement).appendTo(form);jQuery(form).css("position","absolute");
jQuery(form).css("top","-1200px");jQuery(form).css("left","-1200px");jQuery(form).appendTo("body");return form},ajaxFileUpload:function(s){s=jQuery.extend({},jQuery.ajaxSettings,s);var id=(new Date).getTime();var form=jQuery.createUploadForm(id,s.fileElementId,typeof s.data=="undefined"?false:s.data);var io=jQuery.createUploadIframe(id,s.secureuri);var frameId="jUploadFrame"+id;var formId="jUploadForm"+id;if(s.global&&!jQuery.active++)jQuery.event.trigger("ajaxStart");var requestDone=false;var xml=
{};if(s.global)jQuery.event.trigger("ajaxSend",[xml,s]);var uploadCallback=function(isTimeout){var io=document.getElementById(frameId);try{if(io.contentWindow){xml.responseText=io.contentWindow.document.body?io.contentWindow.document.body.innerHTML:null;xml.responseXML=io.contentWindow.document.XMLDocument?io.contentWindow.document.XMLDocument:io.contentWindow.document}else if(io.contentDocument){xml.responseText=io.contentDocument.document.body?io.contentDocument.document.body.innerHTML:null;xml.responseXML=
io.contentDocument.document.XMLDocument?io.contentDocument.document.XMLDocument:io.contentDocument.document}}catch(e){jQuery.handleError(s,xml,null,e)}if(xml||isTimeout=="timeout"){requestDone=true;var status;try{status=isTimeout!="timeout"?"success":"error";if(status!="error"){var data=jQuery.uploadHttpData(xml,s.dataType);if(s.success)s.success(data,status);if(s.global)jQuery.event.trigger("ajaxSuccess",[xml,s])}else jQuery.handleError(s,xml,status)}catch(e){status="error"}if(s.global)jQuery.event.trigger("ajaxComplete",
[xml,s]);if(s.global&&!--jQuery.active)jQuery.event.trigger("ajaxStop");if(s.complete)s.complete(xml,status);jQuery(io).unbind();setTimeout(function(){try{jQuery(io).remove();jQuery(form).remove()}catch(e){jQuery.handleError(s,xml,null,e)}},100);xml=null}};if(s.timeout>0)setTimeout(function(){if(!requestDone)uploadCallback("timeout")},s.timeout);try{var form=jQuery("#"+formId);jQuery(form).attr("action",s.url);jQuery(form).attr("method","POST");jQuery(form).attr("target",frameId);if(form.encoding)jQuery(form).attr("encoding",
"multipart/form-data");else jQuery(form).attr("enctype","multipart/form-data");jQuery(form).submit()}catch(e){jQuery.handleError(s,xml,null,e)}jQuery("#"+frameId).load(uploadCallback);return{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;data=type=="xml"||data?r.responseXML:r.responseText;if(type=="script")jQuery.globalEval(data);if(type=="json")eval("data = "+data);if(type=="html")jQuery("<div>").html(data).evalScripts();return data}});
(function($){var $self;$.fn.exists=function(){if(jQuery(this).length==0)return false;else return true};$.fn.drag_drop_multi_select=function(settings){var config=$.fn.drag_drop_multi_select.defaults;if(settings)config=$.extend($.fn.drag_drop_multi_select.defaults,settings);return this.each(function(i){var unique_id=$.fn.drag_drop_multi_select.unique++;var dragging=false;$self=$(this);$self.attr("ddms",unique_id);$.fn.captureKeys();$.fn.drag_drop_multi_select.stack[unique_id]={"selected":[],"all":[]};
$.fn.drag_drop_multi_select.settings[unique_id]=config;$self.find(config.element_to_drag_drop_select).each(function(){var $item=$(this);var item_id=$.fn.drag_drop_multi_select.unique++;$item.attr("ddms",item_id);$.fn.drag_drop_multi_select.settings["item_"+$item.attr("ddms")]={self:$item,parent_to_refer:$self};$.fn.drag_drop_multi_select.stack[unique_id].all.push(item_id);$item.bind("click.ddms_item_clicked",function(){if($.fn.keyisPressed(CTRL_KEY)||$.fn.keyisPressed(SHIFT_KEY)||$.fn.drag_drop_multi_select.stack[$.fn.drag_drop_multi_select.get_instance_id($(this).attr("ddms"))].selected.length==
1&&$item.hasClass($.fn.drag_drop_multi_select.settings[$.fn.drag_drop_multi_select.get_instance_id($item.attr("ddms"))].selectedClass))$.fn.drag_drop_multi_select.toggle(item_id);else $.fn.drag_drop_multi_select.replace(item_id)});$item.bind("ddms.select",function(){$(this).addClass("ui-selected");$(this).addClass($.fn.drag_drop_multi_select.settings[$.fn.drag_drop_multi_select.get_instance_id($(this).attr("ddms"))].selectedClass);if($self.find(".ui-selected").size()==0)$(config.element_to_show_result).text("");
else $(config.element_to_show_result).text($self.find(".ui-selected").size()+" items are selected")});$item.bind("ddms.deselect",function(){$(this).removeClass("ui-selected");$(this).removeClass($.fn.drag_drop_multi_select.settings[$.fn.drag_drop_multi_select.get_instance_id($(this).attr("ddms"))].selectedClass);if($self.find(".ui-selected").size()==0)$(config.element_to_show_result).text("");else $(config.element_to_show_result).text($self.find(".ui-selected").size()+" items are selected")})});$self.selectable({cancel:"'"+
config.elements_to_cancel_select+","+config.element_to_drag_drop_select+"'",filter:$self.find(config.element_to_drag_drop_select),selecting:function(ev,ui){if($self.find(".ui-selecting").size()==0)$(config.element_to_show_result).text("");else $(config.element_to_show_result).text($self.find(".ui-selecting").size()+" items are in the selection")},unselecting:function(ev,ui){if($self.find(".ui-selecting").size()==0)$(config.element_to_show_result).text("");else $(config.element_to_show_result).text($self.find(".ui-selecting").size()+
" items are in the selection")},stop:function(ev,ui){if($self.find(".ui-selected").size()==0)$(config.element_to_show_result).text("");else $(config.element_to_show_result).text($self.find(".ui-selected").size()+" items are selected")},selected:function(ev,ui){$.fn.drag_drop_multi_select.select(parseInt($(ui.selected).attr("ddms")))},unselected:function(ev,ui){$.fn.drag_drop_multi_select.deselect(parseInt($(ui.unselected).attr("ddms")))}});$self.find(config.element_to_drag_drop_select).draggable({helper:function(){$clicked_item=
$(this);if(!$clicked_item.hasClass("ddms_selected"))$clicked_item.trigger("click.ddms_item_clicked");var instance_id=$.fn.drag_drop_multi_select.get_instance_id($clicked_item.attr("ddms"));var $helper=$('<div ddms_instance="'+instance_id+'"></div>').append('<div class="inside_helper" style="position:absolute;top:-'+$.fn.drag_drop_multi_select.getTopOffset($clicked_item)+"px;left:-"+$.fn.drag_drop_multi_select.getLeftOffset($clicked_item)+'px;" ></div>');$helper.find(".inside_helper").append($.fn.drag_drop_multi_select.getSelectedForDragging($clicked_item.attr("ddms")));
$.fn.drag_drop_multi_select.getListItems(instance_id).filter($.fn.drag_drop_multi_select.settings[instance_id].selectedClass).addClass($.fn.drag_drop_multi_select.settings[instance_id].ghostClass);return $helper},cursor:"move",revert:"invalid",scroll:false,start:function(e,ui){dragging=true},drag:function(e,ui){},stop:function(e,ui){$clicked_item=$(this);var instance_id=$.fn.drag_drop_multi_select.get_instance_id($clicked_item.attr("ddms"));$.fn.drag_drop_multi_select.getListItems(instance_id).filter($.fn.drag_drop_multi_select.settings[instance_id].selectedClass).removeClass($.fn.drag_drop_multi_select.settings[instance_id].ghostClass)}});
var array_of_selected=[];var found=false;$(config.elements_to_drop).droppable({tolerance:"pointer",over:function(e,ui){var $target=$(e.target);var old_instance=parseInt(ui.helper.attr("ddms_instance"));found=false;array_of_selected=[];$.fn.drag_drop_multi_select.getListItems(old_instance).filter(config.selectedClass).each(function(){array_of_selected.push($(this).attr("ddms"))});if($.inArray($target.attr("ddms"),array_of_selected)>-1)found=true;$target.addClass($.fn.drag_drop_multi_select.settings[unique_id].hoverClass)},
out:function(e,ui){var $target=$(e.target);$target.removeClass($.fn.drag_drop_multi_select.settings[unique_id].hoverClass)},drop:function(e,ui){var $target=$(e.target);$target.removeClass($.fn.drag_drop_multi_select.settings[unique_id].hoverClass);var old_instance=parseInt(ui.helper.attr("ddms_instance"));ui.helper.find(".inside_helper ."+config.selectedClass).each(function(){var item_id=parseInt($(this).attr("ddms_drag"));var $item_instance=$.fn.drag_drop_multi_select.settings["item_"+item_id].self;
$.fn.drag_drop_multi_select.moveBetweenLists(item_id,$item_instance,old_instance,unique_id,e,ui)})}})})};$.fn.drag_drop_multi_select.defaults={element_to_drag_drop_select:".ddms",elements_to_cancel_select:".cancel",elements_to_drop:".drop",element_to_show_result:".items_selected",moveOpacity:0.5,ghostClass:"ddms_ghost",hoverClass:"ddms_hover",moveClass:"ddms_move",selectedClass:"ddms_selected",after_drop_action:function($item_instance,$old_container,$new_container,event,helper){}};$.fn.drag_drop_multi_select.unique=
0;$.fn.drag_drop_multi_select.stack=[];$.fn.drag_drop_multi_select.settings=[];$.fn.drag_drop_multi_select.moveBetweenLists=function(item_id,$item_instance,old_container,new_container,event,helper){var instance_id=$.fn.drag_drop_multi_select.get_instance_id(item_id);$.fn.drag_drop_multi_select.deselect(parseInt(item_id));$($.fn.drag_drop_multi_select.settings[instance_id].element_to_show_result).text("");var $old_container=$("[ddms="+old_container+"]");var $new_container=$("[ddms="+new_container+
"]");$.fn.drag_drop_multi_select.settings[instance_id].after_drop_action($item_instance,$old_container,$new_container,event,helper);$.fn.drag_drop_multi_select.stack[old_container].all.splice($.inArray(parseInt(item_id),$.fn.drag_drop_multi_select.stack[old_container].all),1);$.fn.drag_drop_multi_select.stack[new_container].all.push(parseInt(item_id))};$.fn.drag_drop_multi_select.getSelectedForDragging=function(item_id){var instance_id=$.fn.drag_drop_multi_select.get_instance_id(item_id);var $clone_list=
$.fn.drag_drop_multi_select.getListItems(instance_id).clone().each(function(){var id=$(this).attr("ddms");$(this).not("."+$.fn.drag_drop_multi_select.settings[instance_id].selectedClass).hide();$(this).filter("."+$.fn.drag_drop_multi_select.settings[instance_id].selectedClass).addClass($.fn.drag_drop_multi_select.settings[instance_id].moveClass).css({opacity:$.fn.drag_drop_multi_select.settings[instance_id].moveOpacity});$(this).attr("ddms_drag",$(this).attr("ddms"));$(this).attr("ddms","");$(this).css({"position":"absolute",
"left":$('[ddms="'+id+'"]').position().left,"top":$('[ddms="'+id+'"]').position().top})});return $clone_list};$.fn.drag_drop_multi_select.getTopOffset=function($item){var this_offset=$item.position().top;var first_offset=$.fn.drag_drop_multi_select.getListItems($.fn.drag_drop_multi_select.get_instance_id($item.attr("ddms"))).eq(0).position().top;return this_offset};$.fn.drag_drop_multi_select.getLeftOffset=function($item){var this_offset=$item.position().left;var first_offset=$.fn.drag_drop_multi_select.getListItems($.fn.drag_drop_multi_select.get_instance_id($item.attr("ddms"))).eq(0).position().left;
return this_offset};$.fn.drag_drop_multi_select.toggle=function(item_id){if(!$.fn.drag_drop_multi_select.isSelected(item_id))$.fn.drag_drop_multi_select.select(item_id);else $.fn.drag_drop_multi_select.deselect(item_id)};$.fn.drag_drop_multi_select.select=function(item_id){var instance_id=$.fn.drag_drop_multi_select.get_instance_id(item_id);var $item_instance=$.fn.drag_drop_multi_select.settings["item_"+item_id].self;if(!$.fn.drag_drop_multi_select.isSelected(item_id)){$.fn.drag_drop_multi_select.stack[instance_id].selected.push(item_id);
$item_instance.trigger("ddms.select")}};$.fn.drag_drop_multi_select.deselect=function(item_id){var instance_id=$.fn.drag_drop_multi_select.get_instance_id(item_id);var $item_instance=$.fn.drag_drop_multi_select.settings["item_"+item_id].self;if($.fn.drag_drop_multi_select.isSelected(item_id)){$.fn.drag_drop_multi_select.stack[instance_id].selected.splice($.inArray(item_id,$.fn.drag_drop_multi_select.stack[instance_id].selected),1);$item_instance.trigger("ddms.deselect")}};$.fn.drag_drop_multi_select.isSelected=
function(item_id){var $item_instance=$.fn.drag_drop_multi_select.settings["item_"+item_id].self;var instance_id=$.fn.drag_drop_multi_select.get_instance_id(item_id);return $item_instance.hasClass($.fn.drag_drop_multi_select.settings[instance_id].selectedClass)};$.fn.drag_drop_multi_select.replace=function(item_id){var instance_id=$.fn.drag_drop_multi_select.get_instance_id(item_id);$.fn.drag_drop_multi_select.selectNone(instance_id);$.fn.drag_drop_multi_select.stack[instance_id].selected.push(item_id);
var $item_instance=$.fn.drag_drop_multi_select.settings["item_"+item_id].self;$item_instance.trigger("ddms.select")};$.fn.drag_drop_multi_select.getListItems=function(instance_id){var element_to_drag_drop_select=$.fn.drag_drop_multi_select.settings[instance_id].element_to_drag_drop_select;return $("[ddms="+instance_id+"] "+element_to_drag_drop_select)};$.fn.drag_drop_multi_select.get_instance_id=function(item_id){return parseInt($.fn.drag_drop_multi_select.settings["item_"+item_id].parent_to_refer.eq(0).attr("ddms"))};
$.fn.drag_drop_multi_select.serializeArray=function(list_id){var out=[];$.fn.drag_drop_multi_select.getListItems(list_id).each(function(){out.push($(this).attr("id"))});return out};$.fn.drag_drop_multi_select.serialize=function(list_id){return $.fn.drag_drop_multi_select.serializeArray(list_id).join(", ")};$.fn.drag_drop_multi_select.selectNone=function(instance_id){$.fn.drag_drop_multi_select.getListItems(instance_id).each(function(){$.fn.drag_drop_multi_select.deselect($(this).attr("ddms"))});return false};
$.fn.drag_drop_multi_select.selectAll=function(list_id){$.fn.drag_drop_multi_select.getListItems(list_id).each(function(){$.fn.drag_drop_multi_select.select($(this).attr("ddms"))});return false};$.extend({ddms:{selectAll:function(id){return $.fn.drag_drop_multi_select.selectAll($("#"+id).attr("ddms"))},selectNone:function(id){return $.fn.drag_drop_multi_select.selectNone($("#"+id).attr("ddms"))},serialize:function(id){return $.fn.drag_drop_multi_select.serialize($("#"+id).attr("ddms"))}}});var CTRL_KEY=
17;var ALT_KEY=18;var SHIFT_KEY=16;$.fn.captureKeys=function(){if($.fn.captureKeys.capturing)return;$(document).keydown(function(e){if(e.keyCode==CTRL_KEY)$.fn.captureKeys.stack.CTRL_KEY=true;if(e.keyCode==SHIFT_KEY)$.fn.captureKeys.stack.SHIFT_KEY=true;if(e.keyCode==ALT_KEY)$.fn.captureKeys.stack.ALT_KEY=true});$(document).keyup(function(e){if(e.keyCode==CTRL_KEY)$.fn.captureKeys.stack.CTRL_KEY=false;if(e.keyCode==SHIFT_KEY)$.fn.captureKeys.stack.SHIFT_KEY=false;if(e.keyCode==ALT_KEY)$.fn.captureKeys.stack.ALT_KEY=
false})};$.fn.captureKeys.stack={CTRL_KEY:false,SHIFT_KEY:false,ALT_KEY:false};$.fn.captureKeys.capturing=false;$.fn.keyisPressed=function(key){switch(key){case CTRL_KEY:return $.fn.captureKeys.stack.CTRL_KEY;case ALT_KEY:return $.fn.captureKeys.stack.ALT_KEY;case SHIFT_KEY:return $.fn.captureKeys.stack.SHIFT_KEY;default:return false}}})(jQuery);var instance_array=new Array;var config_array=new Array;var objects_array=new Array(instance_array,config_array);var config;
(function($){$.fn.exists=function(){if(jQuery(this).length==0)return false;else return true};$.fn.JCSS_align=function(settings){var defaults={axis:"xy",vertical_align:"middle",vertical_offset:0,horizontal_align:"middle",horizontal_offset:0,index:1};var config=$.extend(defaults,settings);return this.each(function(){instance_array.push(this);config_array.push(config);$.jcss_align_creater(this,config)})};$.jcss_align_creater=function(object,config){return object.JCSS_align||(object.JCSS_align=new $.jcss_align(object,
config))};$.jcss_align=function(object,config){var self=object;var $self=$(object);var parent=$(object).parent();var parentNodeName=parent[0].nodeName;var error=false;var horizontal_align_error=false;var vertical_align_error=false;var axis_error=false;var total_img_to_load=$self.find("img").size();var number_of_images_preloaded=0;var images_loaded=false;if(typeof config.vertical_offset!="number")config.vertical_offset=0;if(typeof config.horizontal_offset!="number")config.horizontal_offset=0;$.extend(self,
{init:function(){if($self.css("position")!="absolute")$self.css({position:"absolute"});if($self.css("z-index")=="auto")$self.css({"z-index":config.index});if(parentNodeName=="BODY"){var sizeBrowser=viewport();var parentWidth=sizeBrowser[0];var parentHeight=sizeBrowser[1];var leftValue,topValue;if(config.horizontal_align=="left"){leftValue=0;leftValue+=config.horizontal_offset}else if(config.horizontal_align=="middle"){leftValue=parentWidth/2;leftValue-=$self.outerWidth()/2}else if(config.horizontal_align==
"right"){leftValue=parentWidth;leftValue-=$self.outerWidth();leftValue-=config.horizontal_offset}else{horizontal_align_error=true;horizontal_align_error_message="horizontal_align : choose a valid options.\n";error=true;leftValue=0}if(config.vertical_align=="top"){topValue=0;topValue+=config.vertical_offset}else if(config.vertical_align=="middle"){topValue=parentHeight/2;topValue-=$self.outerHeight()/2}else if(config.vertical_align=="bottom"){topValue=parentHeight;topValue-=$self.outerHeight();topValue-=
config.vertical_offset}else{vertical_align_error=true;vertical_align_error_message="vertical_align : choose a valid options.\n";error=true;topValue=0}}else{if(parent.css("position")!="relative"&&parent.css("position")!="absolute")parent.css({position:"relative"});parentWidth=parent.outerWidth();parentHeight=parent.outerHeight();if(config.horizontal_align=="left"){leftValue=0;leftValue+=config.horizontal_offset}else if(config.horizontal_align=="middle"){leftValue=parentWidth/2;leftValue-=$self.outerWidth()/
2}else if(config.horizontal_align=="right"){leftValue=parentWidth;leftValue-=$self.outerWidth();leftValue-=config.horizontal_offset}else{horizontal_align_error=true;horizontal_align_error_message="horizontal_align : choose a valid options.\n";error=true;leftValue=0}if(config.vertical_align=="top"){topValue=0;topValue+=config.vertical_offset}else if(config.vertical_align=="middle"){topValue=parentHeight/2;topValue-=$self.outerHeight()/2}else if(config.vertical_align=="bottom"){topValue=parentHeight;
topValue-=$self.outerHeight();topValue-=config.vertical_offset}else{vertical_align_error=true;vertical_align_error_message="vertical_align : choose a valid options.\n";error=true;topValue=0}}if(leftValue<=0)leftValue=0;if(topValue<=0)topValue=0;if(config.axis=="xy")$self.css({top:topValue,left:leftValue});else if(config.axis=="y")$self.css({top:topValue});else if(config.axis=="x")$self.css({left:leftValue});else{axis_error=true;axis_error_message="axis : choose a valid axis.\n";error=true}if(error){var textAlert=
"JCSS_ALIGN Plugins : \n";if(horizontal_align_error)textAlert+=horizontal_align_error_message;if(vertical_align_error)textAlert+=vertical_align_error_message;if(axis_error)textAlert+=axis_error_message;alert(textAlert)}return self},image_load:function(){number_of_images_preloaded++;if(number_of_images_preloaded>=total_img_to_load&&images_loaded!=true){images_loaded=true;self.init()}}});if(self.tagName=="IMG"){var image=new Image;image.src=$self.attr("src");if(image.complete)self.image_load();else image.onload=
self.image_load}else if($self.find("img").exists())$self.find("img").each(function(){var image=new Image;image.src=$(this).attr("src");if(image.complete)self.image_load();else image.onload=self.image_load});else self.init();$(window).resize(function(){self.init()})};function viewport(){if($.browser.msie){var d=$(document).height(),w=$(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d-w<20?w:d]}return[$(window).width(),$(window).height()]}
})(jQuery);